<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Medical AI Governance & Compliance Lifecycle Framework</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --bg: #f5f6f8;
    --surface: #ffffff;
    --border: #e2e5ea;
    --text-primary: #1a1d23;
    --text-secondary: #5a5f6b;
    --text-muted: #8b919d;
    --governance: #1e3a5f;
    --governance-light: #e8eef5;
    --data: #5b2c6f;
    --data-light: #f0e6f6;
    --device: #0e6655;
    --device-light: #e5f5f0;
    --liability: #922b21;
    --liability-light: #f9e8e6;
    --security: #1a5276;
    --security-light: #e4eef6;
    --nist-govern: #1565C0;
    --nist-map: #2E7D32;
    --nist-measure: #E65100;
    --nist-manage: #AD1457;
    --radius: 10px;
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.06);
    --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
    --transition: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  }

  body {
    font-family: 'IBM Plex Sans Thai', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--bg);
    color: var(--text-primary);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
  }

  .container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 32px 24px 48px;
  }

  /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
  .header {
    text-align: center;
    margin-bottom: 36px;
    position: relative;
  }
  .header::after {
    content: '';
    display: block;
    width: 60px;
    height: 3px;
    background: linear-gradient(90deg, var(--nist-govern), var(--nist-manage));
    margin: 16px auto 0;
    border-radius: 2px;
  }
  .header h1 {
    font-size: 26px;
    font-weight: 700;
    letter-spacing: -0.5px;
    line-height: 1.3;
    color: var(--text-primary);
  }
  .header .subtitle {
    font-size: 14px;
    color: var(--text-muted);
    margin-top: 6px;
    font-weight: 400;
  }
  .header .author {
    font-size: 15px;
    font-weight: 600;
    color: var(--text-primary);
    margin-top: 14px;
  }
  .header .affiliation {
    font-size: 13px;
    color: var(--text-secondary);
    margin-top: 2px;
    font-weight: 400;
  }

  /* ‚îÄ‚îÄ NIST Bar ‚îÄ‚îÄ */
  .nist-bar {
    background: var(--surface);
    border-radius: var(--radius);
    padding: 20px;
    margin-bottom: 24px;
    border: 1px solid var(--border);
    box-shadow: var(--shadow-sm);
  }
  .nist-bar .label {
    font-size: 11px;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 12px;
    font-family: 'JetBrains Mono', monospace;
  }
  .nist-functions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 10px;
  }
  .nist-fn {
    padding: 12px 14px;
    border-radius: 8px;
    border-left: 4px solid;
    transition: transform var(--transition);
  }
  .nist-fn:hover { transform: translateY(-1px); }
  .nist-fn .fn-name {
    font-weight: 700;
    font-size: 14px;
    font-family: 'JetBrains Mono', monospace;
  }
  .nist-fn .fn-desc {
    font-size: 11px;
    color: var(--text-secondary);
    margin-top: 3px;
    line-height: 1.4;
  }

  .lifecycle-mapping {
    display: flex;
    align-items: center;
    margin-top: 14px;
    padding: 10px 14px;
    background: var(--bg);
    border-radius: 8px;
    gap: 4px;
    flex-wrap: wrap;
  }
  .lifecycle-mapping .lm-label {
    font-size: 11px;
    color: var(--text-muted);
    margin-right: 6px;
    font-family: 'JetBrains Mono', monospace;
  }
  .stage-chip {
    font-size: 10px;
    padding: 3px 8px;
    border-radius: 4px;
    font-weight: 600;
    font-family: 'JetBrains Mono', monospace;
  }
  .lifecycle-mapping .arrow {
    color: #ccc;
    font-size: 10px;
    margin: 0 1px;
  }

  /* ‚îÄ‚îÄ View Toggle ‚îÄ‚îÄ */
  .view-toggle {
    display: flex;
    gap: 6px;
    justify-content: center;
    margin-bottom: 20px;
  }
  .view-btn {
    padding: 10px 24px;
    border-radius: 8px;
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text-secondary);
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition);
    font-family: inherit;
  }
  .view-btn:hover { border-color: var(--text-muted); }
  .view-btn.active {
    background: var(--text-primary);
    color: white;
    border-color: var(--text-primary);
  }

  /* ‚îÄ‚îÄ Lifecycle Stages Header ‚îÄ‚îÄ */
  .stages-header {
    display: flex;
    padding-left: 152px;
    gap: 2px;
    margin-bottom: 2px;
  }
  .stage-col {
    flex: 1;
    text-align: center;
    padding: 10px 4px 8px;
    position: relative;
    border-bottom: 3px solid;
    transition: background var(--transition);
  }
  .stage-col:first-child { border-radius: 8px 0 0 0; }
  .stage-col:last-child { border-radius: 0 8px 0 0; }
  .stage-num {
    font-size: 9px;
    font-weight: 700;
    text-transform: uppercase;
    font-family: 'JetBrains Mono', monospace;
    letter-spacing: 0.5px;
  }
  .stage-name {
    font-size: 10px;
    font-weight: 600;
    color: var(--text-primary);
    line-height: 1.25;
    margin-top: 3px;
    white-space: pre-line;
  }
  .stage-arrow {
    position: absolute;
    right: -6px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 12px;
    color: #bbb;
    z-index: 2;
  }

  /* ‚îÄ‚îÄ Matrix Grid ‚îÄ‚îÄ */
  .matrix-grid {
    background: var(--surface);
    border-radius: 0 0 var(--radius) var(--radius);
    border: 1px solid var(--border);
    overflow: hidden;
    box-shadow: var(--shadow-md);
  }
  .matrix-row {
    display: flex;
    border-bottom: 1px solid #eee;
  }
  .matrix-row:last-child { border-bottom: none; }
  .layer-label {
    width: 150px;
    min-width: 150px;
    padding: 14px 12px;
    border-right: 3px solid;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 2px;
    transition: background var(--transition);
  }
  .layer-icon { font-size: 18px; }
  .layer-name {
    font-size: 11px;
    font-weight: 700;
    line-height: 1.25;
  }
  .matrix-cell {
    flex: 1;
    padding: 10px 6px;
    border-right: 1px solid #f0f0f0;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    min-height: 64px;
    transition: background var(--transition);
    position: relative;
  }
  .matrix-cell:last-child { border-right: none; }
  .matrix-cell:hover { background: rgba(0,0,0,0.02); }
  .matrix-cell.selected { background: rgba(0,0,0,0.04); }
  .intensity-dots {
    display: flex;
    gap: 3px;
  }
  .dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    transition: transform var(--transition);
  }
  .matrix-cell:hover .dot { transform: scale(1.2); }
  .cell-count {
    font-size: 9px;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
  }

  /* ‚îÄ‚îÄ Legend ‚îÄ‚îÄ */
  .legend {
    display: flex;
    gap: 20px;
    justify-content: center;
    margin-top: 10px;
    font-size: 10px;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
  }

  /* ‚îÄ‚îÄ Detail Panel ‚îÄ‚îÄ */
  .detail-panel {
    margin-top: 20px;
    background: var(--surface);
    border-radius: var(--radius);
    border: 1px solid var(--border);
    overflow: hidden;
    box-shadow: var(--shadow-md);
    animation: slideUp 0.3s ease;
  }
  @keyframes slideUp {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .detail-header {
    padding: 14px 20px;
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .detail-breadcrumb {
    font-size: 11px;
    opacity: 0.8;
  }
  .detail-title {
    font-size: 16px;
    font-weight: 700;
    margin-top: 2px;
  }
  .detail-close {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    border-radius: 6px;
    padding: 5px 12px;
    cursor: pointer;
    font-size: 13px;
    transition: background var(--transition);
    font-family: inherit;
  }
  .detail-close:hover { background: rgba(255,255,255,0.35); }
  .detail-body { padding: 20px; }
  .detail-item {
    display: flex;
    gap: 10px;
    padding: 10px 0;
    border-bottom: 1px solid #f5f5f5;
    align-items: flex-start;
  }
  .detail-item:last-child { border-bottom: none; }
  .detail-num {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    font-size: 10px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 1px;
    font-family: 'JetBrains Mono', monospace;
  }
  .detail-text {
    font-size: 13px;
    color: var(--text-primary);
    line-height: 1.6;
  }

  /* ‚îÄ‚îÄ Layer View ‚îÄ‚îÄ */
  .layer-selector {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 16px;
  }
  .layer-btn {
    padding: 10px 18px;
    border-radius: 10px;
    border: 2px solid var(--border);
    background: var(--surface);
    color: var(--text-secondary);
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition);
    display: flex;
    align-items: center;
    gap: 6px;
    font-family: inherit;
  }
  .layer-btn:hover { border-color: var(--text-muted); }
  .layer-btn.active { border-width: 2px; }

  .layer-detail {
    background: var(--surface);
    border-radius: var(--radius);
    border: 1px solid var(--border);
    overflow: hidden;
    box-shadow: var(--shadow-md);
  }
  .layer-detail-header {
    padding: 20px 24px;
    color: white;
  }
  .layer-detail-title {
    font-size: 20px;
    font-weight: 700;
  }
  .layer-sources {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 8px;
  }
  .source-chip {
    background: rgba(255,255,255,0.2);
    padding: 3px 10px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 500;
  }

  .timeline { padding: 20px 24px; }
  .timeline-item {
    display: flex;
    margin-bottom: 20px;
    gap: 18px;
  }
  .timeline-indicator {
    width: 86px;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .timeline-circle {
    width: 34px;
    height: 34px;
    border-radius: 50%;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 14px;
    font-family: 'JetBrains Mono', monospace;
  }
  .timeline-stage-name {
    font-size: 10px;
    color: var(--text-muted);
    text-align: center;
    margin-top: 4px;
    font-weight: 600;
  }
  .timeline-nist {
    font-size: 9px;
    font-weight: 700;
    margin-top: 2px;
    font-family: 'JetBrains Mono', monospace;
  }
  .timeline-line {
    width: 2px;
    height: 16px;
    background: #e0e0e0;
    margin-top: 6px;
  }
  .timeline-content {
    flex: 1;
    border-radius: 10px;
    padding: 14px 18px;
    border-left: 3px solid;
  }
  .timeline-content-title {
    font-size: 14px;
    font-weight: 700;
    margin-bottom: 8px;
  }
  .timeline-content-item {
    font-size: 12px;
    color: var(--text-secondary);
    padding: 4px 0 4px 14px;
    position: relative;
    line-height: 1.55;
  }
  .timeline-content-item::before {
    content: '‚Ä¢';
    position: absolute;
    left: 0;
    font-weight: 700;
  }

  .empty-state {
    text-align: center;
    padding: 48px;
    color: var(--text-muted);
    font-size: 15px;
  }

  /* ‚îÄ‚îÄ Key Insights ‚îÄ‚îÄ */
  .insights {
    margin-top: 28px;
    background: var(--surface);
    border-radius: var(--radius);
    border: 1px solid var(--border);
    padding: 24px;
    box-shadow: var(--shadow-sm);
  }
  .insights-title {
    font-size: 15px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 14px;
  }
  .insight-card {
    display: flex;
    gap: 12px;
    padding: 12px 14px;
    background: var(--bg);
    border-radius: 8px;
    margin-bottom: 8px;
    transition: transform var(--transition);
  }
  .insight-card:last-child { margin-bottom: 0; }
  .insight-card:hover { transform: translateX(2px); }
  .insight-emoji { font-size: 22px; flex-shrink: 0; }
  .insight-title {
    font-size: 13px;
    font-weight: 700;
    color: var(--text-primary);
  }
  .insight-desc {
    font-size: 12px;
    color: var(--text-secondary);
    margin-top: 2px;
    line-height: 1.5;
  }

  .footer {
    text-align: center;
    margin-top: 28px;
    font-size: 10px;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
    padding: 20px;
    border-top: 1px solid var(--border);
  }
  .footer .copyright {
    margin-top: 8px;
    font-size: 11px;
    color: var(--text-secondary);
    font-family: 'IBM Plex Sans Thai', sans-serif;
    font-weight: 500;
  }

  /* ‚îÄ‚îÄ Print ‚îÄ‚îÄ */
  @media print {
    body { background: white; }
    .view-toggle, .detail-close { display: none; }
    .container { padding: 16px; }
    .matrix-cell { cursor: default; }
  }

  /* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
  @media (max-width: 900px) {
    .stages-header { padding-left: 100px; }
    .layer-label { width: 100px; min-width: 100px; }
    .stage-name { font-size: 9px; }
    .nist-functions { grid-template-columns: 1fr 1fr; }
  }
</style>
</head>
<body>

<div class="container" id="app"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>

<script type="text/babel">
const { useState } = React;

const LAYERS = [
  { id: "governance", name: "AI Governance & Risk Management", shortName: "AI Governance", icon: "üèõÔ∏è", color: "#1e3a5f", lightColor: "#e8eef5", sources: ["NIST AI RMF 1.0", "Thailand AI Ethics Guidelines 1.0"] },
  { id: "data", name: "Data Protection & Privacy", shortName: "Data Protection", icon: "üîí", color: "#5b2c6f", lightColor: "#f0e6f6", sources: ["PDPA ‡∏û.‡∏£.‡∏ö.‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏• ‡∏û.‡∏®. 2562"] },
  { id: "device", name: "Medical Device Regulation", shortName: "Med Device", icon: "üè•", color: "#0e6655", lightColor: "#e5f5f0", sources: ["‡∏û.‡∏£.‡∏ö.‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÅ‡∏û‡∏ó‡∏¢‡πå ‡∏û.‡∏®. 2551", "‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® ‡∏≠‡∏¢. ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á SaMD", "ISO 13485 / IEC 62304"] },
  { id: "liability", name: "Medical Liability & Professional Ethics", shortName: "Med Liability", icon: "‚öñÔ∏è", color: "#922b21", lightColor: "#f9e8e6", sources: ["‡∏Ç‡πâ‡∏≠‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÅ‡∏û‡∏ó‡∏¢‡∏™‡∏†‡∏≤", "‡∏õ.‡∏û.‡∏û. (‡∏•‡∏∞‡πÄ‡∏°‡∏¥‡∏î/‡∏™‡∏±‡∏ç‡∏ç‡∏≤)", "‡∏û.‡∏£.‡∏ö.‡∏™‡∏ñ‡∏≤‡∏ô‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•", "‡∏à‡∏£‡∏¥‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡πÉ‡∏ô‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå"] },
  { id: "security", name: "Digital Infrastructure & Security", shortName: "Digital Security", icon: "üõ°Ô∏è", color: "#1a5276", lightColor: "#e4eef6", sources: ["‡∏û.‡∏£.‡∏ö.‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÑ‡∏ã‡πÄ‡∏ö‡∏≠‡∏£‡πå ‡∏û.‡∏®. 2562", "‡∏û.‡∏£.‡∏ö.‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏≤‡∏á‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå"] },
];

const STAGES = [
  { id: 1, name: "Problem Definition\n& Use Case Design", shortName: "Design", nistFunction: "GOVERN + MAP", nistColor: "#2196F3" },
  { id: 2, name: "Data Collection\n& Preparation", shortName: "Data", nistFunction: "MAP", nistColor: "#4CAF50" },
  { id: 3, name: "Model Development\n& Training", shortName: "Develop", nistFunction: "MAP + MEASURE", nistColor: "#FF9800" },
  { id: 4, name: "Validation &\nClinical Testing", shortName: "Validate", nistFunction: "MEASURE", nistColor: "#FF9800" },
  { id: 5, name: "Regulatory Approval\n& Certification", shortName: "Approve", nistFunction: "GOVERN + MANAGE", nistColor: "#9C27B0" },
  { id: 6, name: "Clinical Deployment\n& Integration", shortName: "Deploy", nistFunction: "MANAGE", nistColor: "#F44336" },
  { id: 7, name: "Post-Market\nSurveillance", shortName: "Monitor", nistFunction: "MANAGE", nistColor: "#F44336" },
];

const MATRIX = {
  governance: {
    1: { title: "Governance Setup & Context Mapping", items: ["‡∏à‡∏±‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á AI Governance (‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö)","GOVERN: ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢ AI ‡∏Ç‡∏≠‡∏á‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£, risk appetite","MAP: ‡∏Å‡∏≥‡∏´‡∏ô‡∏î context, ‡∏£‡∏∞‡∏ö‡∏∏ stakeholders, intended use","‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô risk category ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (‡∏ï‡∏≤‡∏° Thailand AI Guidelines)","‡∏Å‡∏≥‡∏´‡∏ô‡∏î ethical guardrails: ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ò‡∏£‡∏£‡∏°, ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™, ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÑ‡∏î‡πâ"] },
    2: { title: "Data Risk Mapping", items: ["MAP: ‡∏£‡∏∞‡∏ö‡∏∏ data requirements, ‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•, ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î","‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå bias risks ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (demographic, selection, measurement bias)","‡∏Å‡∏≥‡∏´‡∏ô‡∏î data quality standards & documentation","‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô representativeness ‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢"] },
    3: { title: "Measurement Framework", items: ["MEASURE: ‡∏Å‡∏≥‡∏´‡∏ô‡∏î performance metrics, fairness criteria","‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö bias testing protocol (across subgroups)","‡∏Å‡∏≥‡∏´‡∏ô‡∏î explainability requirements ‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á","Document model architecture decisions & rationale"] },
    4: { title: "Performance Evaluation", items: ["MEASURE: ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û, red-teaming, stress testing","‡∏ó‡∏î‡∏™‡∏≠‡∏ö fairness across demographic groups","‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô robustness & edge cases","Independent validation & third-party audit (‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)"] },
    5: { title: "Accountability Documentation", items: ["GOVERN: ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ accountability & transparency","MANAGE: ‡∏à‡∏±‡∏î‡∏ó‡∏≥ risk treatment plans","AI impact assessment report","‡∏à‡∏±‡∏î‡∏ó‡∏≥ model card / system documentation"] },
    6: { title: "Deployment Governance", items: ["MANAGE: ‡∏Å‡∏≥‡∏´‡∏ô‡∏î human oversight mechanisms","‡∏Å‡∏≥‡∏´‡∏ô‡∏î human-in-the-loop vs. human-on-the-loop","‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö override & escalation procedures","‡∏ù‡∏∂‡∏Å‡∏≠‡∏ö‡∏£‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (clinicians) ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á AI limitations"] },
    7: { title: "Continuous Monitoring & Response", items: ["MANAGE: continuous performance monitoring","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö model drift & data drift","Incident response plan & reporting","‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô governance framework ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞","Feedback loop ‡∏à‡∏≤‡∏Å clinicians ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà development"] },
  },
  data: {
    1: { title: "Lawful Basis Planning", items: ["‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ê‡∏≤‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• (‡∏°.24, ‡∏°.26)","‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û = ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ê‡∏≤‡∏ô ‡∏°.26","‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡∏ä‡∏±‡∏î‡πÅ‡∏à‡πâ‡∏á / ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ / ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞‡∏î‡πâ‡∏≤‡∏ô‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏™‡∏∏‡∏Ç","‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô DPIA (Data Protection Impact Assessment)"] },
    2: { title: "PDPA Compliance in Data Pipeline", items: ["‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏° DPIA ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö","‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ consent management / ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢","Purpose limitation: ‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á","Data minimization: ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô","‡πÅ‡∏à‡πâ‡∏á Privacy Notice ‡πÅ‡∏Å‡πà‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•","De-identification / Pseudonymization ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°","‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• (Record of Processing Activities)"] },
    3: { title: "Processing Safeguards", items: ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡πÑ‡∏ß‡πâ","‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° (‡∏°.37)","‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤ automated decision-making provisions","Cross-border data transfer safeguards (‡∏°.28-29) ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ cloud ‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®"] },
    4: { title: "Test Data Compliance", items: ["‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ê‡∏≤‡∏ô‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö test data","Anonymization ‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö external validation","‡πÅ‡∏¢‡∏Å‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á vs. test data"] },
    5: { title: "Documentation for Compliance", items: ["‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ PDPA compliance ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö regulatory submission","‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢, DPIA results, ‡∏°‡∏≤‡∏ï‡∏£‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢"] },
    6: { title: "Operational Privacy", items: ["‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà transparency (‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ß‡πà‡∏≤‡πÉ‡∏ä‡πâ AI)","‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á, ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç, ‡∏•‡∏ö, ‡∏Ñ‡∏±‡∏î‡∏Ñ‡πâ‡∏≤‡∏ô","‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠ re-train ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ê‡∏≤‡∏ô‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢","Privacy by design ‡πÉ‡∏ô clinical workflow"] },
    7: { title: "Ongoing Data Governance", items: ["‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô DPIA ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞ (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á)","Data retention & deletion policy","‡πÅ‡∏ú‡∏ô‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏•‡∏∞‡πÄ‡∏°‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Data Breach Notification ‡∏°.37(4))","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ê‡∏≤‡∏ô‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ (‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡∏ñ‡∏π‡∏Å‡∏ñ‡∏≠‡∏ô?)"] },
  },
  device: {
    1: { title: "SaMD Classification", items: ["‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ß‡πà‡∏≤ software ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πà‡∏≤‡∏¢ SaMD ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà","‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ï‡∏≤‡∏° IMDRF risk framework","State of healthcare condition √ó Significance of information","‡∏Å‡∏≥‡∏´‡∏ô‡∏î intended use & indications for use","‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô regulatory pathway (‡πÅ‡∏à‡πâ‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£/‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô)"] },
    2: { title: "Data for Regulatory Purposes", items: ["‡∏Å‡∏≥‡∏´‡∏ô‡∏î data quality requirements ‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô regulatory","‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô clinical evidence strategy","Traceability ‡∏Ç‡∏≠‡∏á training data"] },
    3: { title: "Software Development Lifecycle", items: ["‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏° IEC 62304 (Software lifecycle processes)","Design controls & design history file","Software verification & documentation","Configuration management"] },
    4: { title: "Clinical Evidence Generation", items: ["Analytical validation (technical performance)","Clinical validation (clinical performance)","‡∏à‡∏±‡∏î‡∏ó‡∏≥ clinical evidence ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà ‡∏≠‡∏¢. ‡∏Å‡∏≥‡∏´‡∏ô‡∏î","Comparison with predicate device / clinical standard"] },
    5: { title: "Thai FDA Registration", items: ["‡∏¢‡∏∑‡πà‡∏ô‡∏Ç‡∏≠ ‡πÅ‡∏à‡πâ‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£/‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô ‡∏ï‡πà‡∏≠ ‡∏≠‡∏¢.","‡∏à‡∏±‡∏î‡∏ó‡∏≥ Technical Documentation","QMS certification (ISO 13485)","Labeling & Instructions for Use ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢","Conformity assessment"] },
    6: { title: "Compliant Deployment", items: ["‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô","Labeling requirements ‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•","Version control & change management","Installation Qualification (IQ) / Operational Qualification (OQ)"] },
    7: { title: "Post-Market Obligations", items: ["‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÑ‡∏°‡πà‡∏û‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏ï‡πà‡∏≠ ‡∏≠‡∏¢.","Post-market clinical follow-up","Model update ‚Üí re-assessment (Predetermined Change Control Plan)","‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï / ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô classification","PCCP: ‡πÅ‡∏ú‡∏ô‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤"] },
  },
  liability: {
    1: { title: "Clinical Need & Ethics", items: ["‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô clinical need & unmet medical need","‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤ ethical implications ‡∏Ç‡∏≠‡∏á use case","‡∏Ç‡∏≠ IRB / Ethics Committee ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢)","‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤ equity & access implications"] },
    2: { title: "Research Ethics", items: ["‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ IRB ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢","Consent ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö secondary use of data","‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤ waiver of consent (retrospective data)","‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏£‡∏¥‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢ (Declaration of Helsinki)"] },
    3: { title: "Clinical Input", items: ["Clinical expert involvement ‡πÉ‡∏ô model development","‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö clinical validity ‡∏Ç‡∏≠‡∏á model output","‡∏Å‡∏≥‡∏´‡∏ô‡∏î clinical workflow integration points"] },
    4: { title: "Clinical Trial Governance", items: ["‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏±‡∏¢‡∏ó‡∏≤‡∏á‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å (‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô clinical trial)","IRB oversight ‡∏ï‡∏•‡∏≠‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö","Subject safety monitoring"] },
    5: { title: "Liability Framework", items: ["‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏£‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î: ‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤ vs. ‡∏™‡∏ñ‡∏≤‡∏ô‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• vs. ‡πÅ‡∏û‡∏ó‡∏¢‡πå","‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô professional indemnity insurance","‡∏à‡∏±‡∏î‡∏ó‡∏≥ contractual liability allocation"] },
    6: { title: "Clinical Practice Integration", items: ["Informed Consent: ‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ß‡πà‡∏≤‡πÉ‡∏ä‡πâ AI ‡∏ä‡πà‡∏ß‡∏¢‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢/‡∏£‡∏±‡∏Å‡∏©‡∏≤","Standard of care: AI ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô standard of care ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?","‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ (clinical judgment)","‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ AI ‡πÉ‡∏ô‡πÄ‡∏ß‡∏ä‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô","‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ AI output ‡∏Ç‡∏±‡∏î‡πÅ‡∏¢‡πâ‡∏á‡∏Å‡∏±‡∏ö clinical judgment","‡∏Ç‡πâ‡∏≠‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÅ‡∏û‡∏ó‡∏¢‡∏™‡∏†‡∏≤: ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û"] },
    7: { title: "Ongoing Liability Management", items: ["‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô adverse events & near misses","‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô standard of care ‡πÄ‡∏°‡∏∑‡πà‡∏≠ AI performance ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô","‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ malpractice claims ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö AI","Continuing medical education ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á AI updates"] },
  },
  security: {
    1: { title: "Architecture Planning", items: ["‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô system architecture & security requirements","‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πà‡∏≤‡∏¢ CII (Critical Information Infrastructure) ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà","‡∏Å‡∏≥‡∏´‡∏ô‡∏î data flow & integration points"] },
    2: { title: "Data Security", items: ["Encryption at rest & in transit","Access control & authentication ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö data access","Secure data storage & backup","Audit trail ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö data access"] },
    3: { title: "Development Security", items: ["Secure development environment","Code review & security testing","Version control & access management"] },
    4: { title: "Testing Security", items: ["Penetration testing & vulnerability assessment","Security testing ‡∏Ç‡∏≠‡∏á model endpoints","Adversarial robustness testing"] },
    5: { title: "Security Certification", items: ["Security assessment documentation","‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ó‡∏µ‡πà ‡∏≠‡∏¢. ‡∏Å‡∏≥‡∏´‡∏ô‡∏î","Incident response plan"] },
    6: { title: "Operational Security", items: ["‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏° ‡∏û.‡∏£.‡∏ö.‡πÑ‡∏ã‡πÄ‡∏ö‡∏≠‡∏£‡πå (‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô CII)","Integration security ‡∏Å‡∏±‡∏ö HIS/EMR","Authentication & authorization ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö clinical users","Audit logging ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô AI","‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏° ‡∏û.‡∏£.‡∏ö.‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏≤‡∏á‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå (e-signature, e-records)"] },
    7: { title: "Continuous Security", items: ["Continuous security monitoring","Vulnerability management & patching","‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏´‡∏ï‡∏∏‡∏†‡∏±‡∏¢‡∏Ñ‡∏∏‡∏Å‡∏Ñ‡∏≤‡∏°‡∏ó‡∏≤‡∏á‡πÑ‡∏ã‡πÄ‡∏ö‡∏≠‡∏£‡πå (‡∏ï‡∏≤‡∏° ‡∏û.‡∏£.‡∏ö.‡πÑ‡∏ã‡πÄ‡∏ö‡∏≠‡∏£‡πå)","Periodic security audit & penetration testing"] },
  },
};

const NIST_FUNCTIONS = [
  { name: "GOVERN", color: "#1565C0", desc: "Culture, Governance Structure, Policies ‚Äî Cross-cutting ‡∏ó‡∏∏‡∏Å stage" },
  { name: "MAP", color: "#2E7D32", desc: "Context, Risk Identification, Stakeholder Analysis" },
  { name: "MEASURE", color: "#E65100", desc: "Assessment, Metrics, Bias Testing, Validation" },
  { name: "MANAGE", color: "#AD1457", desc: "Monitoring, Response, Deployment Controls" },
];

const INSIGHTS = [
  { emoji: "üîÑ", title: "NIST AI RMF ‡πÄ‡∏õ‡πá‡∏ô backbone", desc: "GOVERN ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà cross-cutting ‡∏ó‡∏∏‡∏Å stage ‡∏Ç‡∏ì‡∏∞‡∏ó‡∏µ‡πà MAP ‚Üí MEASURE ‚Üí MANAGE ‡πÑ‡∏´‡∏•‡πÑ‡∏õ‡∏ï‡∏≤‡∏° lifecycle" },
  { emoji: "‚öñÔ∏è", title: "Liability Gap ‡∏ó‡∏µ‡πà‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ", desc: "‡πÄ‡∏°‡∏∑‡πà‡∏≠ AI ‡∏ä‡πà‡∏ß‡∏¢‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢ ‡πÉ‡∏Ñ‡∏£‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î? ‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ clinical judgment ‚Äî AI ‡πÄ‡∏õ‡πá‡∏ô \"‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠\" ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà \"‡∏ú‡∏π‡πâ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à\"" },
  { emoji: "üîí", title: "PDPA ‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà Data Collection", desc: "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏ê‡∏≤‡∏ô ‡∏°.26 ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏°‡∏Å‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡∏°.24) ‡∏°‡∏≤‡∏Å" },
  { emoji: "üè•", title: "SaMD ‚â† ‡∏ó‡∏∏‡∏Å Health AI", desc: "‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡πà‡∏≤ software ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πà‡∏≤‡∏¢ SaMD ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‚Äî clinical decision support ‡∏ö‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πà‡∏≤‡∏¢" },
  { emoji: "üìä", title: "Post-Market ‡πÄ‡∏õ‡πá‡∏ô stage ‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î", desc: "‡∏ï‡πâ‡∏≠‡∏á monitor ‡∏ó‡∏±‡πâ‡∏á model drift, adverse events, data retention, security ‚Äî ‡∏ó‡∏∏‡∏Å layer ‡∏°‡∏µ‡∏†‡∏≤‡∏£‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà" },
];

function App() {
  const [selectedCell, setSelectedCell] = useState(null);
  const [selectedLayer, setSelectedLayer] = useState(null);
  const [view, setView] = useState("matrix");

  const handleCellClick = (layerId, stageId) => {
    const key = `${layerId}-${stageId}`;
    setSelectedCell(selectedCell === key ? null : key);
  };

  const getIntensity = (layerId, stageId) => {
    const items = MATRIX[layerId]?.[stageId]?.items || [];
    if (items.length >= 5) return 3;
    if (items.length >= 3) return 2;
    return 1;
  };

  return (
    <React.Fragment>
      {/* Header */}
      <div className="header">
        <h1>Medical AI Governance & Compliance<br/>Lifecycle Framework</h1>
        <div className="subtitle">‡∏Å‡∏£‡∏≠‡∏ö‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ò‡∏£‡∏£‡∏°‡∏≤‡∏†‡∏¥‡∏ö‡∏≤‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ AI ‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå</div>
        <div className="author">‡∏ú‡∏®. ‡∏î‡∏£. ‡∏û‡∏µ‡∏£‡∏û‡∏±‡∏í ‡πÇ‡∏ä‡∏Ñ‡∏™‡∏∏‡∏ß‡∏±‡∏í‡∏ô‡∏™‡∏Å‡∏∏‡∏•</div>
        <div className="affiliation">‡∏Ñ‡∏ì‡∏∞‡∏ô‡∏¥‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏à‡∏∏‡∏¨‡∏≤‡∏•‡∏á‡∏Å‡∏£‡∏ì‡πå‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢ | Chula.AI Centre</div>
        <div className="affiliation">peerapat.ch@chula.ac.th</div>
      </div>

      {/* NIST Bar */}
      <div className="nist-bar">
        <div className="label">NIST AI RMF 1.0 Core Functions</div>
        <div className="nist-functions">
          {NIST_FUNCTIONS.map(fn => (
            <div key={fn.name} className="nist-fn" style={{ borderLeftColor: fn.color, background: fn.color + '10' }}>
              <div className="fn-name" style={{ color: fn.color }}>{fn.name}</div>
              <div className="fn-desc">{fn.desc}</div>
            </div>
          ))}
        </div>
        <div className="lifecycle-mapping">
          <span className="lm-label">Lifecycle ‚Üí</span>
          {STAGES.map((s, i) => (
            <React.Fragment key={s.id}>
              <span className="stage-chip" style={{ background: s.nistColor + '18', color: s.nistColor }}>
                S{s.id}: {s.nistFunction}
              </span>
              {i < STAGES.length - 1 && <span className="arrow">‚Üí</span>}
            </React.Fragment>
          ))}
        </div>
      </div>

      {/* View Toggle */}
      <div className="view-toggle">
        <button className={`view-btn ${view === 'matrix' ? 'active' : ''}`} onClick={() => { setView('matrix'); setSelectedCell(null); setSelectedLayer(null); }}>
          üìä Matrix View
        </button>
        <button className={`view-btn ${view === 'layers' ? 'active' : ''}`} onClick={() => { setView('layers'); setSelectedCell(null); setSelectedLayer(null); }}>
          üìã Layer Detail View
        </button>
      </div>

      {/* Matrix View */}
      {view === 'matrix' && (
        <React.Fragment>
          <div className="stages-header">
            {STAGES.map((stage, i) => (
              <div key={stage.id} className="stage-col" style={{
                background: `linear-gradient(135deg, ${stage.nistColor}15, ${stage.nistColor}05)`,
                borderBottomColor: stage.nistColor,
                borderRadius: i === 0 ? '8px 0 0 0' : i === STAGES.length - 1 ? '0 8px 0 0' : 0
              }}>
                <div className="stage-num" style={{ color: stage.nistColor }}>Stage {stage.id}</div>
                <div className="stage-name">{stage.name}</div>
                {i < STAGES.length - 1 && <span className="stage-arrow">‚Ä∫</span>}
              </div>
            ))}
          </div>

          <div className="matrix-grid">
            {LAYERS.map(layer => (
              <div key={layer.id} className="matrix-row">
                <div className="layer-label" style={{ background: layer.lightColor, borderRightColor: layer.color }}>
                  <span className="layer-icon">{layer.icon}</span>
                  <span className="layer-name" style={{ color: layer.color }}>{layer.shortName}</span>
                </div>
                {STAGES.map(stage => {
                  const cellKey = `${layer.id}-${stage.id}`;
                  const isSelected = selectedCell === cellKey;
                  const dots = getIntensity(layer.id, stage.id);
                  const data = MATRIX[layer.id]?.[stage.id];
                  const opacity = dots === 3 ? 'cc' : dots === 2 ? '88' : '44';
                  return (
                    <div key={cellKey} className={`matrix-cell ${isSelected ? 'selected' : ''}`}
                      onClick={() => handleCellClick(layer.id, stage.id)}
                      style={isSelected ? { background: layer.color + '12' } : {}}>
                      <div className="intensity-dots">
                        {Array.from({ length: dots }).map((_, i) => (
                          <div key={i} className="dot" style={{ background: layer.color + opacity }} />
                        ))}
                      </div>
                      <span className="cell-count">{data?.items?.length || 0} items</span>
                    </div>
                  );
                })}
              </div>
            ))}
          </div>

          <div className="legend">
            <span>‚óè Low (1-2)</span>
            <span>‚óè‚óè Medium (3-4)</span>
            <span>‚óè‚óè‚óè High (5+)</span>
            <span style={{ fontStyle: 'italic' }}>Click any cell for details</span>
          </div>

          {selectedCell && (() => {
            const [layerId, stageId] = selectedCell.split('-');
            const layer = LAYERS.find(l => l.id === layerId);
            const stage = STAGES.find(s => s.id === parseInt(stageId));
            const data = MATRIX[layerId]?.[stageId];
            return (
              <div className="detail-panel">
                <div className="detail-header" style={{ background: layer.color }}>
                  <div>
                    <div className="detail-breadcrumb">{layer.icon} {layer.name} ‚Üí Stage {stage.id}: {stage.shortName}</div>
                    <div className="detail-title">{data?.title}</div>
                  </div>
                  <button className="detail-close" onClick={() => setSelectedCell(null)}>‚úï</button>
                </div>
                <div className="detail-body">
                  {data?.items?.map((item, i) => (
                    <div key={i} className="detail-item">
                      <div className="detail-num" style={{ background: layer.color + '15', color: layer.color }}>{i + 1}</div>
                      <div className="detail-text">{item}</div>
                    </div>
                  ))}
                </div>
              </div>
            );
          })()}
        </React.Fragment>
      )}

      {/* Layer View */}
      {view === 'layers' && (
        <React.Fragment>
          <div className="layer-selector">
            {LAYERS.map(layer => (
              <button key={layer.id}
                className={`layer-btn ${selectedLayer === layer.id ? 'active' : ''}`}
                onClick={() => setSelectedLayer(selectedLayer === layer.id ? null : layer.id)}
                style={selectedLayer === layer.id ? { borderColor: layer.color, background: layer.lightColor, color: layer.color } : {}}>
                {layer.icon} {layer.shortName}
              </button>
            ))}
          </div>

          {selectedLayer ? (() => {
            const layer = LAYERS.find(l => l.id === selectedLayer);
            return (
              <div className="layer-detail">
                <div className="layer-detail-header" style={{ background: layer.color }}>
                  <div className="layer-detail-title">{layer.icon} {layer.name}</div>
                  <div className="layer-sources">
                    {layer.sources.map((s, i) => <span key={i} className="source-chip">{s}</span>)}
                  </div>
                </div>
                <div className="timeline">
                  {STAGES.map(stage => {
                    const data = MATRIX[selectedLayer]?.[stage.id];
                    return (
                      <div key={stage.id} className="timeline-item">
                        <div className="timeline-indicator">
                          <div className="timeline-circle" style={{ background: stage.nistColor }}>{stage.id}</div>
                          <div className="timeline-stage-name">{stage.shortName}</div>
                          <div className="timeline-nist" style={{ color: stage.nistColor }}>{stage.nistFunction}</div>
                          {stage.id < 7 && <div className="timeline-line" />}
                        </div>
                        <div className="timeline-content" style={{ background: layer.lightColor, borderLeftColor: layer.color }}>
                          <div className="timeline-content-title" style={{ color: layer.color }}>{data?.title}</div>
                          {data?.items?.map((item, i) => (
                            <div key={i} className="timeline-content-item" style={{ '--dot-color': layer.color }}>
                              {item}
                            </div>
                          ))}
                        </div>
                      </div>
                    );
                  })}
                </div>
              </div>
            );
          })() : (
            <div className="empty-state">üëÜ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Layer ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ï‡∏≤‡∏° Lifecycle</div>
          )}
        </React.Fragment>
      )}

      <div className="footer">
        <div>Medical AI Governance & Compliance Lifecycle Framework v1.0</div>
        <div style={{ marginTop: 4 }}>‡∏ú‡∏®. ‡∏î‡∏£. ‡∏û‡∏µ‡∏£‡∏û‡∏±‡∏í ‡πÇ‡∏ä‡∏Ñ‡∏™‡∏∏‡∏ß‡∏±‡∏í‡∏ô‡∏™‡∏Å‡∏∏‡∏• ‚Äî ‡∏Ñ‡∏ì‡∏∞‡∏ô‡∏¥‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏à‡∏∏‡∏¨‡∏≤‡∏•‡∏á‡∏Å‡∏£‡∏ì‡πå‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢ | Chula.AI Centre</div>
        <div className="copyright">¬© 2025 ‡∏û‡∏µ‡∏£‡∏û‡∏±‡∏í ‡πÇ‡∏ä‡∏Ñ‡∏™‡∏∏‡∏ß‡∏±‡∏í‡∏ô‡∏™‡∏Å‡∏∏‡∏• ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå | All Rights Reserved</div>
      </div>
    </React.Fragment>
  );
}

ReactDOM.createRoot(document.getElementById('app')).render(<App />);
</script>
</body>
</html>
